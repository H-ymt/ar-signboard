# ãƒ•ã‚§ãƒ¼ã‚º4ï¼šã‚­ãƒ£ãƒ—ãƒãƒ£æ©Ÿèƒ½ è¨­è¨ˆæ›¸

**ä½œæˆæ—¥**: 2025å¹´10æœˆ14æ—¥
**ãƒ•ã‚§ãƒ¼ã‚º**: 4 / 5
**ç›®çš„**: ARè¡¨ç¤ºã®ã‚­ãƒ£ãƒ—ãƒãƒ£ã¨ç”»åƒä¿å­˜æ©Ÿèƒ½ã®å®Ÿè£…

---

## 1. æ¦‚è¦

### 1.1 ç›®çš„

ãƒ•ã‚§ãƒ¼ã‚º3ã§å®Ÿè£…ã—ãŸARè¡¨ç¤ºã¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã«ã€ã‚­ãƒ£ãƒ—ãƒãƒ£æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚ã‚«ãƒ¡ãƒ©æ˜ åƒã¨ARè¡¨ç¤ºã‚’åˆæˆã—ãŸç”»åƒã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã€ç«¯æœ«ã«ä¿å­˜ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

### 1.2 ä¸»ãªæ©Ÿèƒ½

- ARè¡¨ç¤ºã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæ’®å½±
- ã‚«ãƒ¡ãƒ©æ˜ åƒã¨ARè¡¨ç¤ºã®åˆæˆ
- ç”»åƒã®ç«¯æœ«ã¸ã®ä¿å­˜
- ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
- SNSå…±æœ‰æ©Ÿèƒ½ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

---

## 2. æ©Ÿèƒ½è¦ä»¶

### 2.1 ã‚­ãƒ£ãƒ—ãƒãƒ£æ©Ÿèƒ½

#### 2.1.1 ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒœã‚¿ãƒ³

**è¦ä»¶**:
- ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ä¸­ã®ã¿è¡¨ç¤º
- ã‚¿ãƒƒãƒ—ã§ã‚­ãƒ£ãƒ—ãƒãƒ£å®Ÿè¡Œ
- ã‚·ãƒ£ãƒƒã‚¿ãƒ¼éŸ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- ã‚­ãƒ£ãƒ—ãƒãƒ£ä¸­ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º

**UIé…ç½®**:
- ç”»é¢ä¸‹éƒ¨ä¸­å¤®
- ä»–ã®UIã¨å¹²æ¸‰ã—ãªã„ä½ç½®
- å¤§ãã‚ã®ãƒœã‚¿ãƒ³ï¼ˆè¦ªæŒ‡ã§æŠ¼ã—ã‚„ã™ã„ï¼‰

#### 2.1.2 ã‚­ãƒ£ãƒ—ãƒãƒ£å‡¦ç†

**æŠ€è¡“ä»•æ§˜**:
```typescript
interface CaptureOptions {
  width?: number;          // å‡ºåŠ›ç”»åƒã®å¹…ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ç”»é¢å¹…ï¼‰
  height?: number;         // å‡ºåŠ›ç”»åƒã®é«˜ã•ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ç”»é¢é«˜ã•ï¼‰
  quality?: number;        // JPEGå“è³ª 0.0-1.0ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0.92ï¼‰
  format?: 'image/jpeg' | 'image/png';  // ç”»åƒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
}

interface CaptureResult {
  dataUrl: string;         // Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸç”»åƒãƒ‡ãƒ¼ã‚¿
  blob: Blob;              // Blobå½¢å¼ã®ç”»åƒãƒ‡ãƒ¼ã‚¿
  width: number;           // å®Ÿéš›ã®ç”»åƒå¹…
  height: number;          // å®Ÿéš›ã®ç”»åƒé«˜ã•
  timestamp: number;       // ã‚­ãƒ£ãƒ—ãƒãƒ£æ™‚åˆ»ï¼ˆUnix timestampï¼‰
}
```

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. A-Frameã‚·ãƒ¼ãƒ³ã®canvasã‚’å–å¾—
2. canvasã‹ã‚‰Base64ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
3. ãƒ‡ãƒ¼ã‚¿ã‚’Blobã«å¤‰æ›
4. CaptureResultå½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™

### 2.2 ç”»åƒä¿å­˜æ©Ÿèƒ½

#### 2.2.1 ä¿å­˜æ–¹æ³•

**ãƒ–ãƒ©ã‚¦ã‚¶APIä½¿ç”¨**:
```typescript
// HTML5 Download API
const link = document.createElement('a');
link.download = `ar-signboard-${timestamp}.jpg`;
link.href = dataUrl;
link.click();
```

**ãƒ•ã‚¡ã‚¤ãƒ«åå½¢å¼**:
- `ar-signboard-YYYYMMDD-HHMMSS.jpg`
- ä¾‹: `ar-signboard-20251014-213045.jpg`

#### 2.2.2 ä¿å­˜å…ˆ

- **iOS Safari**: ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ«ãƒ€ã¾ãŸã¯å†™çœŸã‚¢ãƒ—ãƒªï¼ˆé•·æŠ¼ã—ã§é¸æŠï¼‰
- **Android Chrome**: ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ«ãƒ€

### 2.3 ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½

#### 2.3.1 ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«

**è¡¨ç¤ºå†…å®¹**:
- ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ãŸç”»åƒ
- ä¿å­˜ãƒœã‚¿ãƒ³
- å†æ’®å½±ãƒœã‚¿ãƒ³
- å…±æœ‰ãƒœã‚¿ãƒ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³

**å‹•ä½œ**:
- ã‚­ãƒ£ãƒ—ãƒãƒ£ç›´å¾Œã«è‡ªå‹•è¡¨ç¤º
- ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã§å…¨ç”»é¢è¡¨ç¤º
- èƒŒæ™¯ã‚¿ãƒƒãƒ—ã§é–‰ã˜ã‚‹

### 2.4 å…±æœ‰æ©Ÿèƒ½ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

#### 2.4.1 Web Share API

```typescript
if (navigator.share && navigator.canShare) {
  await navigator.share({
    files: [new File([blob], 'ar-signboard.jpg', { type: 'image/jpeg' })],
    title: 'ARçœ‹æ¿',
    text: 'ARçœ‹æ¿ã‚¢ãƒ—ãƒªã§ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¾ã—ãŸ'
  });
}
```

**å¯¾å¿œOS**:
- iOS Safari: å®Œå…¨å¯¾å¿œ
- Android Chrome: å®Œå…¨å¯¾å¿œ
- ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: é™å®šçš„å¯¾å¿œ

---

## 3. æŠ€è¡“è¨­è¨ˆ

### 3.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
src/
â”œâ”€â”€ ar/
â”‚   â””â”€â”€ captureService.ts          # ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆæ–°è¦ï¼‰
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ar/
â”‚   â”‚   â””â”€â”€ ARScene.tsx             # ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ CaptureButton.tsx       # ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒœã‚¿ãƒ³ï¼ˆæ–°è¦ï¼‰
â”‚       â””â”€â”€ CapturePreview.tsx      # ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆæ–°è¦ï¼‰
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useCapture.ts               # ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ•ãƒƒã‚¯ï¼ˆæ–°è¦ï¼‰
â””â”€â”€ utils/
    â””â”€â”€ imageUtils.ts               # ç”»åƒå‡¦ç†ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆæ–°è¦ï¼‰
```

### 3.2 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

#### 3.2.1 CaptureButton

**å½¹å‰²**: ã‚­ãƒ£ãƒ—ãƒãƒ£å®Ÿè¡Œãƒœã‚¿ãƒ³

**Props**:
```typescript
interface CaptureButtonProps {
  onCapture: () => void;
  isCapturing: boolean;
  disabled?: boolean;
}
```

**å®Ÿè£…**:
```tsx
export const CaptureButton = ({
  onCapture,
  isCapturing,
  disabled
}: CaptureButtonProps) => {
  return (
    <button
      onClick={onCapture}
      disabled={disabled || isCapturing}
      className="fixed bottom-20 left-1/2 z-30 -translate-x-1/2
                 rounded-full bg-white p-4 shadow-lg"
      aria-label="å†™çœŸã‚’æ’®ã‚‹"
    >
      {isCapturing ? (
        <div className="animate-spin">â³</div>
      ) : (
        <div className="text-3xl">ğŸ“·</div>
      )}
    </button>
  );
};
```

#### 3.2.2 CapturePreview

**å½¹å‰²**: ã‚­ãƒ£ãƒ—ãƒãƒ£ç”»åƒã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ä¿å­˜

**Props**:
```typescript
interface CapturePreviewProps {
  imageUrl: string | null;
  onSave: () => void;
  onRetake: () => void;
  onShare?: () => void;
  onClose: () => void;
}
```

**å®Ÿè£…**:
```tsx
export const CapturePreview = ({
  imageUrl,
  onSave,
  onRetake,
  onShare,
  onClose
}: CapturePreviewProps) => {
  if (!imageUrl) return null;

  return (
    <div className="fixed inset-0 z-50 bg-black bg-opacity-90">
      <div className="flex h-full flex-col items-center justify-center p-4">
        {/* ç”»åƒè¡¨ç¤º */}
        <img
          src={imageUrl}
          alt="ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼"
          className="max-h-[70vh] rounded-lg shadow-xl"
        />

        {/* ãƒœã‚¿ãƒ³ç¾¤ */}
        <div className="mt-6 flex gap-4">
          <button onClick={onRetake} className="btn-secondary">
            å†æ’®å½±
          </button>
          <button onClick={onSave} className="btn-primary">
            ä¿å­˜
          </button>
          {onShare && (
            <button onClick={onShare} className="btn-secondary">
              å…±æœ‰
            </button>
          )}
        </div>

        {/* é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ */}
        <button
          onClick={onClose}
          className="absolute right-4 top-4 text-white"
        >
          âœ•
        </button>
      </div>
    </div>
  );
};
```

### 3.3 ãƒ•ãƒƒã‚¯è¨­è¨ˆ

#### 3.3.1 useCapture

**å½¹å‰²**: ã‚­ãƒ£ãƒ—ãƒãƒ£æ©Ÿèƒ½ã®çŠ¶æ…‹ç®¡ç†ã¨ãƒ­ã‚¸ãƒƒã‚¯

**å®Ÿè£…**:
```typescript
import { useState, useCallback } from 'react';
import { captureARScene, saveImage, shareImage } from '../ar/captureService';

export const useCapture = () => {
  const [isCapturing, setIsCapturing] = useState(false);
  const [captureResult, setCaptureResult] = useState<CaptureResult | null>(null);
  const [error, setError] = useState<Error | null>(null);

  const capture = useCallback(async (sceneElement: HTMLElement) => {
    setIsCapturing(true);
    setError(null);

    try {
      const result = await captureARScene(sceneElement);
      setCaptureResult(result);
      return result;
    } catch (err) {
      setError(err as Error);
      throw err;
    } finally {
      setIsCapturing(false);
    }
  }, []);

  const save = useCallback(async () => {
    if (!captureResult) return;

    try {
      await saveImage(captureResult);
    } catch (err) {
      setError(err as Error);
      throw err;
    }
  }, [captureResult]);

  const share = useCallback(async () => {
    if (!captureResult) return;

    try {
      await shareImage(captureResult);
    } catch (err) {
      setError(err as Error);
      throw err;
    }
  }, [captureResult]);

  const reset = useCallback(() => {
    setCaptureResult(null);
    setError(null);
  }, []);

  return {
    isCapturing,
    captureResult,
    error,
    capture,
    save,
    share,
    reset
  };
};
```

### 3.4 ã‚µãƒ¼ãƒ“ã‚¹è¨­è¨ˆ

#### 3.4.1 captureService.ts

**å½¹å‰²**: ã‚­ãƒ£ãƒ—ãƒãƒ£å‡¦ç†ã®å®Ÿè£…

```typescript
import type { CaptureOptions, CaptureResult } from '../types/capture';

/**
 * A-Frameã‚·ãƒ¼ãƒ³ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦Base64ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
 */
export const captureARScene = async (
  sceneElement: HTMLElement,
  options: CaptureOptions = {}
): Promise<CaptureResult> => {
  const scene = sceneElement.querySelector('a-scene') as any;
  if (!scene) {
    throw new Error('A-Frame scene not found');
  }

  // A-Frameã®canvasã‚’å–å¾—
  const canvas = scene.components.screenshot?.getCanvas();
  if (!canvas) {
    throw new Error('Canvas not found');
  }

  // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
  const {
    width = canvas.width,
    height = canvas.height,
    quality = 0.92,
    format = 'image/jpeg'
  } = options;

  // canvasã‹ã‚‰Base64ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
  const dataUrl = canvas.toDataURL(format, quality);

  // BlobURLã«å¤‰æ›
  const blob = await (await fetch(dataUrl)).blob();

  return {
    dataUrl,
    blob,
    width,
    height,
    timestamp: Date.now()
  };
};

/**
 * ç”»åƒã‚’ç«¯æœ«ã«ä¿å­˜
 */
export const saveImage = async (result: CaptureResult): Promise<void> => {
  const timestamp = new Date(result.timestamp).toISOString()
    .replace(/:/g, '')
    .replace(/\..+/, '')
    .replace('T', '-');

  const filename = `ar-signboard-${timestamp}.jpg`;

  // HTML5 Download APIã‚’ä½¿ç”¨
  const link = document.createElement('a');
  link.href = result.dataUrl;
  link.download = filename;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
};

/**
 * Web Share APIã§ç”»åƒã‚’å…±æœ‰
 */
export const shareImage = async (result: CaptureResult): Promise<void> => {
  if (!navigator.share || !navigator.canShare) {
    throw new Error('Web Share API not supported');
  }

  const file = new File(
    [result.blob],
    'ar-signboard.jpg',
    { type: 'image/jpeg' }
  );

  const shareData = {
    files: [file],
    title: 'ARçœ‹æ¿',
    text: 'ARçœ‹æ¿ã‚¢ãƒ—ãƒªã§ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¾ã—ãŸ'
  };

  if (!navigator.canShare(shareData)) {
    throw new Error('Cannot share this data');
  }

  await navigator.share(shareData);
};
```

### 3.5 å‹å®šç¾©

#### 3.5.1 src/types/capture.ts

```typescript
/**
 * ã‚­ãƒ£ãƒ—ãƒãƒ£é–¢é€£ã®å‹å®šç¾©
 */

export interface CaptureOptions {
  width?: number;
  height?: number;
  quality?: number;
  format?: 'image/jpeg' | 'image/png';
}

export interface CaptureResult {
  dataUrl: string;
  blob: Blob;
  width: number;
  height: number;
  timestamp: number;
}

export interface CaptureError {
  type: CaptureErrorType;
  message: string;
  originalError?: Error;
}

export const CaptureErrorType = {
  SCENE_NOT_FOUND: 'SCENE_NOT_FOUND',
  CANVAS_NOT_FOUND: 'CANVAS_NOT_FOUND',
  CAPTURE_FAILED: 'CAPTURE_FAILED',
  SAVE_FAILED: 'SAVE_FAILED',
  SHARE_NOT_SUPPORTED: 'SHARE_NOT_SUPPORTED',
  SHARE_FAILED: 'SHARE_FAILED',
} as const;

export type CaptureErrorType = typeof CaptureErrorType[keyof typeof CaptureErrorType];
```

---

## 4. App.tsxçµ±åˆ

### 4.1 æ›´æ–°å†…å®¹

```tsx
import { useState } from 'react';

import { ARScene } from './components/ar/ARScene';
import { CaptureButton } from './components/ui/CaptureButton';
import { CapturePreview } from './components/ui/CapturePreview';
import { ControlsOverlay } from './components/ui/ControlsOverlay';
// ... ãã®ä»–ã®import

function App() {
  // ... æ—¢å­˜ã®state

  const [showCapturePreview, setShowCapturePreview] = useState(false);
  const { isCapturing, captureResult, capture, save, share, reset } = useCapture();

  const handleCapture = async () => {
    const sceneElement = document.querySelector('.ar-scene-container');
    if (sceneElement) {
      await capture(sceneElement as HTMLElement);
      setShowCapturePreview(true);
    }
  };

  const handleSave = async () => {
    await save();
    setShowCapturePreview(false);
    reset();
  };

  const handleRetake = () => {
    setShowCapturePreview(false);
    reset();
  };

  return (
    <div className="h-screen w-screen">
      {/* ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ */}

      {isInitialized && (
        <>
          <div className="ar-scene-container">
            <ARScene
              targetUrl={MINDAR_CONFIG.targetUrl}
              signboard={currentDesign}
              transform={transform}
              onTargetFound={() => setIsTracking(true)}
              onTargetLost={() => setIsTracking(false)}
            />
          </div>

          <ControlsOverlay
            isTracking={isTracking}
            showHelp={showHelp}
            onToggleDesignSwitcher={() => setShowDesignSwitcher(!showDesignSwitcher)}
            onDismissHelp={() => setShowHelp(false)}
          />

          {/* ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒœã‚¿ãƒ³ */}
          {isTracking && (
            <CaptureButton
              onCapture={handleCapture}
              isCapturing={isCapturing}
            />
          )}

          {/* ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ */}
          <CapturePreview
            imageUrl={captureResult?.dataUrl || null}
            onSave={handleSave}
            onRetake={handleRetake}
            onShare={navigator.share ? share : undefined}
            onClose={handleRetake}
          />

          <SignboardSwitcher
            designs={SIGNBOARD_DESIGNS}
            currentDesignId={currentDesignId}
            onDesignChange={setCurrentDesignId}
            isVisible={showDesignSwitcher}
            onClose={() => setShowDesignSwitcher(false)}
          />
        </>
      )}
    </div>
  );
}
```

---

## 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 5.1 ç”»åƒã‚µã‚¤ã‚ºæœ€é©åŒ–

**æ¨å¥¨è¨­å®š**:
- å¹…: 1280pxä»¥ä¸‹
- JPEGå“è³ª: 0.85-0.92
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: 500KB-2MBç›®æ¨™

### 5.2 ãƒ¡ãƒ¢ãƒªç®¡ç†

**æ³¨æ„ç‚¹**:
- ã‚­ãƒ£ãƒ—ãƒãƒ£å¾Œã¯ä¸è¦ãªãƒ‡ãƒ¼ã‚¿URLã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- Blobã®å‚ç…§ã‚’ãƒªã‚»ãƒƒãƒˆ
- é€£ç¶šã‚­ãƒ£ãƒ—ãƒãƒ£æ™‚ã®ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢

```typescript
useEffect(() => {
  return () => {
    if (captureResult?.dataUrl) {
      URL.revokeObjectURL(captureResult.dataUrl);
    }
  };
}, [captureResult]);
```

---

## 6. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 6.1 ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹

| ã‚¨ãƒ©ãƒ¼ | åŸå›  | å¯¾å¿œ |
|--------|------|------|
| ã‚·ãƒ¼ãƒ³ãŒè¦‹ã¤ã‹ã‚‰ãªã„ | A-Frameã®åˆæœŸåŒ–æœªå®Œäº† | ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã€ãƒªãƒˆãƒ©ã‚¤ |
| canvasãŒè¦‹ã¤ã‹ã‚‰ãªã„ | ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœªå®Œäº† | å°‘ã—å¾…ã£ã¦ã‹ã‚‰ãƒªãƒˆãƒ©ã‚¤ |
| ä¿å­˜å¤±æ•— | ãƒ–ãƒ©ã‚¦ã‚¶æ¨©é™ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¸è¶³ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º |
| å…±æœ‰å¤±æ•— | Web Share APIéå¯¾å¿œ | å…±æœ‰ãƒœã‚¿ãƒ³éè¡¨ç¤ºã€ä»£æ›¿æ‰‹æ®µæç¤º |

### 6.2 ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

```tsx
{error && (
  <div className="fixed bottom-4 left-4 right-4 rounded-lg bg-red-500 p-4 text-white">
    <p className="font-bold">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</p>
    <p className="text-sm">{error.message}</p>
  </div>
)}
```

---

## 7. ãƒ†ã‚¹ãƒˆé …ç›®

### 7.1 æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

- [ ] ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒœã‚¿ãƒ³ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ä¸­ã®ã¿ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒœã‚¿ãƒ³ãŒæœ‰åŠ¹
- [ ] ã‚­ãƒ£ãƒ—ãƒãƒ£å®Ÿè¡Œã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ä¿å­˜ãƒœã‚¿ãƒ³ã§ç”»åƒãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹
- [ ] å†æ’®å½±ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒé–‰ã˜ã‚‹
- [ ] å…±æœ‰ãƒœã‚¿ãƒ³ã§å…±æœ‰ã‚·ãƒ¼ãƒˆãŒé–‹ãï¼ˆiOS/Androidï¼‰

### 7.2 ç«¯æœ«ãƒ†ã‚¹ãƒˆ

- [ ] iOS Safari: ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ»ä¿å­˜ãƒ»å…±æœ‰
- [ ] Android Chrome: ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ»ä¿å­˜ãƒ»å…±æœ‰
- [ ] ä½æ€§èƒ½ç«¯æœ«ã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- [ ] ç•°ãªã‚‹ç”»é¢ã‚µã‚¤ã‚ºã§ã®è¡¨ç¤º

### 7.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ

- [ ] ã‚·ãƒ¼ãƒ³åˆæœŸåŒ–å‰ã®ã‚­ãƒ£ãƒ—ãƒãƒ£è©¦è¡Œ
- [ ] ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¸è¶³æ™‚ã®ä¿å­˜
- [ ] Web Share APIéå¯¾å¿œç«¯æœ«ã§ã®å…±æœ‰

---

## 8. å®Ÿè£…é †åº

### 8.1 ã‚¹ãƒ†ãƒƒãƒ—1: åŸºæœ¬ã‚­ãƒ£ãƒ—ãƒãƒ£æ©Ÿèƒ½

1. å‹å®šç¾©ã®ä½œæˆ (`src/types/capture.ts`)
2. ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚µãƒ¼ãƒ“ã‚¹ã®å®Ÿè£… (`src/ar/captureService.ts`)
3. useCaptureãƒ•ãƒƒã‚¯ã®å®Ÿè£… (`src/hooks/useCapture.ts`)

### 8.2 ã‚¹ãƒ†ãƒƒãƒ—2: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

1. CaptureButtonã®å®Ÿè£…
2. CapturePreviewã®å®Ÿè£…
3. App.tsxã¸ã®çµ±åˆ

### 8.3 ã‚¹ãƒ†ãƒƒãƒ—3: å…±æœ‰æ©Ÿèƒ½ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

1. Web Share APIã®å®Ÿè£…
2. å…±æœ‰ãƒœã‚¿ãƒ³ã®è¿½åŠ 
3. ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†

### 8.4 ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ†ã‚¹ãƒˆã¨æœ€é©åŒ–

1. å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ
2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š
3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„

---

## 9. å®Œæˆã®å®šç¾©

### 9.1 å¿…é ˆè¦ä»¶

- âœ… ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒœã‚¿ãƒ³ãŒæ©Ÿèƒ½ã™ã‚‹
- âœ… ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºãŒæ­£ã—ãå‹•ä½œã™ã‚‹
- âœ… ç”»åƒä¿å­˜ãŒæ­£å¸¸ã«å®Œäº†ã™ã‚‹
- âœ… iOS/Androidã®ä¸¡æ–¹ã§å‹•ä½œç¢ºèª

### 9.2 ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¦ä»¶

- â­• Web Share APIã«ã‚ˆã‚‹å…±æœ‰æ©Ÿèƒ½
- â­• ã‚·ãƒ£ãƒƒã‚¿ãƒ¼éŸ³ã®å®Ÿè£…
- â­• é€£ç¶šã‚­ãƒ£ãƒ—ãƒãƒ£æ©Ÿèƒ½
- â­• ã‚®ãƒ£ãƒ©ãƒªãƒ¼è¡¨ç¤º

---

## 10. æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã¸

ãƒ•ã‚§ãƒ¼ã‚º4å®Œäº†å¾Œã€ãƒ•ã‚§ãƒ¼ã‚º5ï¼ˆæœ€çµ‚èª¿æ•´ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰ã«é€²ã¿ã¾ã™ã€‚

**ãƒ•ã‚§ãƒ¼ã‚º5ã®å†…å®¹**:
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æ”¹å–„
- PWAå¯¾å¿œ
- ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™
